/* eslint-disable */
export function getFocusSnapshot(e=""){const t=document.activeElement,n={label:e,time:(new Date).toISOString(),tag:t?.tagName,id:t?.id||null,class:t?.className||null,text:t?.innerText?.slice(0,40)||null,isBody:t===document.body,isHtml:t===document.documentElement};return console.table(n),n}let previousTime=0;const shownBanners=new Set,STORAGE_KEY="vizio_canvas_shown_banners",loadShownBanners=()=>{try{const e=sessionStorage.getItem(STORAGE_KEY);if(e){JSON.parse(e).forEach(e=>shownBanners.add(e))}}catch(e){console.error("Error loading shown banners from sessionStorage:",e)}},saveShownBanners=()=>{try{const e=Array.from(shownBanners);sessionStorage.setItem(STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Error saving shown banners to sessionStorage:",e)}},BANNER_CONFIGS=[[180,0,0,0,2e4],[1800,2,2,2,2e4],[2700,1,1,1,2e4]];export const resetBannerState=(e=!1)=>{if(previousTime=0,shownBanners.clear(),e)try{sessionStorage.removeItem(STORAGE_KEY)}catch(e){console.error("Error clearing shown banners from sessionStorage:",e)}else loadShownBanners()};export const createTrappedDiv=(e,t,n)=>{if(!e)return;if(document.querySelector('[id^="trapped-overlay-div"]'))return;let r=null;for(const[e,t,o,i,a]of BANNER_CONFIGS)if(!shownBanners.has(e)&&n>=e){r={bannerTime:e,adIndex:t,impIndex:o,engIndex:i,displayDuration:a},shownBanners.add(e),saveShownBanners();break}if(previousTime=n,!r)return;const o="trapped-overlay-div-"+Date.now().toString(36)+Math.random().toString(36).substr(2);let i=!0;const a=document.createElement("div");a.id=o,a.tabIndex=0,Object.assign(a.style,{position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh",backgroundColor:"transparent",zIndex:"99999",display:"flex",justifyContent:"center",alignItems:"center"});const s=document.getElementById("player-overlay"),l=s&&s.style.display||"none";s&&(s.style.display="none");const c=['<div id="l-banner-host" class="lb-banner-host lb-visible" aria-live="polite" style="position:fixed;right:24px;bottom:24px;width:auto;height:auto;pointer-events:none;z-index:9999;"><div id="corner-banner-poll-state" class="corner-banner-poll-container" style="width:720px;max-width:95vw;display:flex;align-items:center;justify-content:center;z-index:15;pointer-events:auto;opacity:1;transform:translateY(0);transition:opacity 0.5s,transform 0.5s;"><div class="corner-banner-poll" style="background:rgba(0,0,0,0.6);border-radius:16px;padding:3rem 3.5rem;width:100%;max-width:850px;display:flex;flex-direction:column;gap:2rem;align-items:center;text-align:center;color:white;pointer-events:auto;position:relative;z-index:15;"><img src="https://raw.githubusercontent.com/akash768145s/img/main/hello.png" alt="Holiday kitchen hero" style="width:100%;height:auto;max-height:360px;object-fit:cover;border-radius:12px;margin-bottom:1.75rem;"><h3 style="margin:0;font-size:2.5rem;font-weight:700;color:white">What\'s your holiday kitchen vibe this year?</h3><p style="margin:0;font-size:1.5rem;font-weight:500;color:white;line-height:1.6;">Pick the option that best matches your kitchen vibe.</p><div style="display:flex;gap:2rem;margin-top:1.5rem;justify-content:center;"><button class="corner-banner-poll-button corner-banner-poll-button-left focusable adBtn" type="button" tabindex="0" data-webos-focusable="true" style="background:rgba(0,0,0,0.75);border:3px solid rgb(20,184,166);color:white;padding:1.5rem 3.5rem;border-radius:12px;cursor:pointer;font-size:1.4rem;font-weight:700;transition:0.2s;pointer-events:auto;position:relative;z-index:16;outline:none;min-width:260px;">Press Left for Cozy cooking nights</button><button class="corner-banner-poll-button corner-banner-poll-button-right focusable adBtn" type="button" tabindex="0" data-webos-focusable="true" style="background:rgba(0,0,0,0.75);border:3px solid rgb(20,184,166);color:white;padding:1.5rem 3.5rem;border-radius:12px;cursor:pointer;font-size:1.4rem;font-weight:700;transition:0.2s;pointer-events:auto;position:relative;z-index:16;outline:none;min-width:260px;">Press Right for Hosting &amp; showing off</button></div></div></div><div id="corner-banner-qr-state" class="corner-banner-qr-container" style="width:720px;max-width:95vw;display:none;align-items:center;justify-content:center;z-index:15;pointer-events:auto;opacity:1;transform:translateY(0);"><div class="corner-banner-poll" style="background:rgba(0,0,0,0.6);border-radius:16px;padding:2.5rem 3rem;width:100%;max-width:850px;display:flex;flex-direction:column;gap:1.75rem;align-items:center;text-align:center;color:white;pointer-events:auto;position:relative;z-index:15;"><img src="https://raw.githubusercontent.com/akash768145s/img/main/hello.png" alt="Holiday kitchen hero" style="width:100%;height:auto;max-height:360px;object-fit:cover;border-radius:12px;margin-bottom:1.5rem;"><h3 style="margin:0;font-size:2.3rem;font-weight:700;color:white">Save up to 35% for the Holidays</h3><p style="margin:0;font-size:1.5rem;font-weight:500;color:white">Scan here</p><img src="https://raw.githubusercontent.com/akash768145s/img/main/o.png" id="qrAd1" alt="Holiday offer QR code" style="width:180px;height:180px;object-fit:contain;background:white;padding:0.75rem;border-radius:0.75rem;"><p style="margin:0;margin-top:1.25rem;font-size:1.6rem;font-weight:400;color:white">Brought to you by <span style="text-decoration:underline">fromourplace.com</span></p></div></div></div>','<div id="l-banner-host" class="lb-banner-host lb-visible" aria-live="polite" style="position:absolute;inset:0;width:100%;height:100%;pointer-events:none;z-index:9999;"><img src="https://raw.githubusercontent.com/akash768145s/img/main/s.png" class="corner-banner-santa-image" style="position:absolute;bottom:70px;left:20px;width:403px;height:auto;max-height:550px;object-fit:contain;z-index:10;pointer-events:none;display:block;"><div id="corner-banner-poll-state" class="corner-banner-poll-container" style="position:absolute;right:10px;bottom:70px;width:550px;height:400px;display:flex;align-items:center;justify-content:center;z-index:15;pointer-events:auto;opacity:1;transform:translateY(0);transition:opacity 0.5s,transform 0.5s;"><div class="corner-banner-poll" style="background:rgba(0,0,0,0.6);border-radius:16px;padding:3rem 3.5rem;width:100%;max-width:850px;display:flex;flex-direction:column;gap:2rem;align-items:center;text-align:center;color:white;pointer-events:auto;position:relative;z-index:15;"><h3 style="margin:0;font-size:2.5rem;font-weight:700;color:white">Santa\'s checking his list</h3><p style="margin:0;font-size:2rem;font-weight:700;color:white;line-height:1.6;">Want to see if your child is on the nice list or Naughty list?</p><div style="display:flex;gap:2rem;margin-top:1.5rem;"><button class="corner-banner-poll-button corner-banner-poll-button-left focusable adBtn" type="button" tabindex="0" data-webos-focusable="true" style="background:rgba(0,0,0,0.75);border:3px solid rgb(20,184,166);color:white;padding:1.5rem 3.5rem;border-radius:12px;cursor:pointer;font-size:1.75rem;font-weight:700;transition:0.2s;pointer-events:auto;position:relative;z-index:16;outline:none;">Press Left for Nice List</button><button class="corner-banner-poll-button corner-banner-poll-button-right focusable adBtn" type="button" tabindex="0" data-webos-focusable="true" style="background:rgba(0,0,0,0.75);border:3px solid rgb(20,184,166);color:white;padding:1.5rem 3.5rem;border-radius:12px;cursor:pointer;font-size:1.75rem;font-weight:700;transition:0.2s;pointer-events:auto;position:relative;z-index:16;outline:none;">Press Right for Naughty List</button></div></div></div><div id="corner-banner-qr-state" class="corner-banner-qr-container" style="position:absolute;right:10px;bottom:70px;width:550px;height:400px;display:none;align-items:center;justify-content:center;z-index:15;pointer-events:auto;opacity:1;transform:translateY(0);transition:opacity 0.5s,transform 0.5s;"><div class="corner-banner-qr" tabindex="-1" style="background:rgba(0,0,0,0.6);border-radius:16px;padding:3rem 3.5rem;width:100%;max-width:850px;display:flex;flex-direction:column;gap:1.75rem;align-items:center;text-align:center;color:white;pointer-events:auto;position:relative;z-index:15;"><p style="margin:0;font-size:2rem;font-weight:700;color:white;line-height:1.6;">Send your child a custom letter from Santa</p><p style="margin:0;font-size:1.75rem;font-weight:700;color:white">Scan Here</p><img src="https://raw.githubusercontent.com/akash768145s/img/main/q2.png" style="width:240px;height:240px;object-fit:contain;background:white;padding:1.25rem;border-radius:8px;"><p style="margin:1rem 0 0;font-size:1.6rem;font-weight:700;color:rgba(255,255,255,0.9);">Brought to you by PackageFromSanta.com</p></div></div></div>','<div id="l-banner-host" class="lb-banner-host lb-visible" aria-live="polite" style="position:fixed;right:24px;bottom:24px;width:auto;height:auto;pointer-events:none;z-index:9999;"><div id="corner-banner-poll-state" class="corner-banner-poll-container" style="width:460px;max-width:65vw;display:flex;align-items:center;justify-content:center;z-index:15;pointer-events:auto;opacity:1;transform:translateY(0);transition:opacity 0.5s,transform 0.5s;"><div class="corner-banner-poll" style="background:rgba(0,0,0,0.3);border-radius:16px;padding:2.5rem 3.5rem;width:100%;max-width:700px;display:flex;flex-direction:column;gap:1.75rem;align-items:center;text-align:center;color:white;pointer-events:auto;position:relative;z-index:15;"><img src="https://raw.githubusercontent.com/akash768145s/img/main/c1.png" alt="Macy\'s deal hero" style="width:100%;height:auto;max-height:420px;object-fit:cover;border-radius:14px;margin-bottom:1.5rem;"><h3 style="margin:0;font-size:2rem;font-weight:700;color:white">If Macy\'s Dropped a secret Deal,which one are you grabbing?</h3><div style="display:flex;flex-direction:row;gap:1.25rem;margin-top:1.5rem;justify-content:center;width:100%;"><button class="corner-banner-poll-button corner-banner-poll-button-left focusable adBtn" type="button" tabindex="0" data-webos-focusable="true" style="background:rgba(0,0,0,0.75);border:2px solid rgb(20,184,166);color:white;padding:1.25rem 2rem;border-radius:12px;cursor:pointer;font-size:1.45rem;font-weight:700;transition:0.2s;pointer-events:auto;position:relative;z-index:16;outline:none;min-width:180px;flex:1;">Press Left for 40% winter wear</button><button class="corner-banner-poll-button corner-banner-poll-button-right focusable adBtn" type="button" tabindex="0" data-webos-focusable="true" style="background:rgba(0,0,0,0.75);border:2px solid rgb(20,184,166);color:white;padding:1.25rem 2rem;border-radius:12px;cursor:pointer;font-size:1.35rem;font-weight:700;transition:0.2s;pointer-events:auto;position:relative;z-index:16;outline:none;min-width:180px;flex:1;">Press Right for Home Essentials Upgrade</button></div></div></div><div id="corner-banner-qr-state" class="corner-banner-qr-container" style="width:460px;max-width:65vw;display:none;align-items:center;justify-content:center;z-index:15;pointer-events:auto;opacity:1;transform:translateY(0);"><div class="corner-banner-poll" style="background:rgba(0,0,0,0.3);border-radius:16px;padding:2.5rem 3.5rem;width:100%;max-width:700px;display:flex;flex-direction:column;gap:1.75rem;align-items:center;text-align:center;color:white;pointer-events:auto;position:relative;z-index:15;"><img src="https://raw.githubusercontent.com/akash768145s/img/main/c1.png" alt="Macy\'s deal hero" style="width:100%;height:auto;max-height:420px;object-fit:cover;border-radius:14px;margin-bottom:1.5rem;"><h3 style="margin:0;font-size:1.9rem;font-weight:700;color:white">Seasonal Sales Collections</h3><p style="margin:0;font-size:1.3rem;font-weight:500;color:white">Scan Here</p><img src="https://raw.githubusercontent.com/akash768145s/img/main/m.png" alt="Macy\'s QR code" style="width:160px;height:160px;object-fit:contain;background:white;padding:1rem;border-radius:1rem;"><p style="margin:0;margin-top:1.5rem;font-size:1.6rem;font-weight:400;color:white">Brought to you by <span style="text-decoration:underline">macys.com</span></p></div></div></div>'],d=["https://canvas-siau-server-dev.vercel.app/api/track/impression/elem_corner_banner_1766044307401?elementType=corner-banner&tv=Vizio%20Action%20Plus","https://canvas-siau-server-dev.vercel.app/api/track/impression/elem_corner_banner_1764413032946?elementType=corner-banner&tv=Vizio%20Action%20Plus","https://canvas-siau-server-dev.vercel.app/api/track/impression/elem_corner_banner_1766072522478?elementType=corner-banner&tv=Vizio%20Action%20Plus"],p=["https://canvas-siau-server-dev.vercel.app/api/track/creativeClick/elem_corner_banner_1766044307401/segment1?elementType=l-banner&interactionType=l-squeeze&tv=Vizio%20Action%20Plus","https://canvas-siau-server-dev.vercel.app/api/track/creativeClick/elem_corner_banner_1764413032946/segment1?elementType=l-banner&interactionType=l-squeeze&tv=Vizio%20Action%20Plus","https://canvas-siau-server-dev.vercel.app/api/track/creativeClick/elem_corner_banner_1766072522478/segment1?elementType=l-banner&interactionType=l-squeeze&tv=Vizio%20Action%20Plus"],{adIndex:m,impIndex:h,engIndex:u,displayDuration:g}=r;a.innerHTML=c[m];const b=p[u],y=g||5e3;fetch(d[h]).then(()=>console.log("URL triggered")).catch(e=>console.error(e)),document.body.appendChild(a),a.setAttribute("data-webos-focusable","true");let f=null;const x=()=>{i=!1,f&&(clearTimeout(f),f=null),fetch(b).catch(()=>{}),document.removeEventListener("keydown",k,!0),document.removeEventListener("keyup",S,!0),a.parentNode&&a.parentNode.removeChild(a),s&&(s.style.display=l&&"none"!==l?l:"none")};a.querySelectorAll(".focusable").forEach(e=>{e.addEventListener("click",()=>{const e=document.getElementById("corner-banner-poll-state"),t=document.getElementById("corner-banner-qr-state"),n=document.getElementById("l-banner-host");e&&(e.style.display="none"),t&&(!n||0!==m&&2!==m||(n.style.position="fixed",n.style.right="24px",n.style.bottom="24px",n.style.top="auto",n.style.left="auto"),t.style.display="flex"),f&&clearTimeout(f),f=setTimeout(x,y)})});const v=Array.from(a.querySelectorAll(".adBtn"));let w=0;const z=e=>{if(!v.length)return;const t=(e+v.length)%v.length;w=t;const n=v[w];n.hasAttribute("tabindex")||n.setAttribute("tabindex","0"),n.focus()};v.length?setTimeout(()=>{z(0)},0):setTimeout(()=>{a.focus()},0);const k=e=>{if(!i)return;const{keyCode:t}=e;if(document.activeElement===a||a.contains(document.activeElement)||(v.length?z(w):a.focus()),37!==t&&39!==t){if(13===t){const t=document.activeElement;return void(t&&t.classList.contains("adBtn")&&(t.click(),e.preventDefault(),e.stopPropagation()))}8!==t&&461!==t&&27!==t||(x(),e.preventDefault(),e.stopPropagation())}else v.length&&(z(w+(37===t?-1:1)),e.preventDefault(),e.stopPropagation())},S=e=>{if(!i)return;const{keyCode:t}=e;37!==t&&39!==t&&13!==t&&8!==t&&27!==t&&461!==t||(e.preventDefault(),e.stopPropagation())};return document.addEventListener("keydown",k,!0),document.addEventListener("keyup",S,!0),x};const vizioCornerBannerPlugin={init(e){this.player=e,resetBannerState()},onPlay(){},onPause(){},onTimeUpdate(e){this.player&&createTrappedDiv(document.body,this.player,e)},destroy(){resetBannerState()}};export default vizioCornerBannerPlugin;